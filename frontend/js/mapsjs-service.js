H.util.eval("function U(a,b,c,d,e,f){if(a&&b)this.Se(a),this.ad(b),this.Zb(c),this.ei(e),this.bi(f),this.kg(d);else throw Error('Parameters \"scheme\" and \"host\" must be specified');}r(\"H.service.Url\",U);\nfunction kj(a,b){var c=a,d=document,e,f,g,h,k=d.createElement(\"a\");b&&(f=(e=d.getElementsByTagName(\"base\")[0])&&e.href,g=d.head,h=e||g.appendChild(d.createElement(\"base\")),h.href=b);k.href=c;c=k.href;b&&(e?e.href=f:g.removeChild(h));c=/(?:(\\w+):\\/\\/)?(?:([^:]+):([^@/]*)@)?([^/:]+)?(?:[:]{1}([0-9]+))?(\\/[^?#]*)?(\\?[^#]+)?(#.*)?/.exec(c);e=c[1];k=c[4];f=c[5];d=c[6];g=c[7];h=c[8];!c[2]&&k&&/@/.test(k)&&(k=k.split(\"@\")[1]);var c=k,d=d&&0<d.length?d.substr(1):\"\",k={},l,n;if(g)for(l=/([?&]?([^=&+]+))(=([^&]+))?/g;n=\nl.exec(g);)k[decodeURIComponent(n[2])]=n[4]?decodeURIComponent(n[4]):void 0;return new U(e,c,d,k,isNaN(+f)?void 0:+f,h&&0<h.length?h.substr(1):\"\")}U.parse=kj;var lj=0;U.prototype.i=function(){lj++;return new U(this.Pe,this.jc,this.A,this.Jg(),this.Wc,this.ra)};U.prototype.clone=U.prototype.i;U.prototype.Se=function(a){if(!a||\"string\"!==typeof a)throw Error('The \"scheme\" parameter must be a non-empty string.');this.Pe=a;return this};U.prototype.setScheme=U.prototype.Se;U.prototype.Cm=function(){return this.Pe};\nU.prototype.getScheme=U.prototype.Cm;U.prototype.ad=function(a){if(!a||\"string\"!==typeof a||\"-\"===a.charAt(0)||\".\"===a.charAt(0)||\".\"===a.charAt(a.length-1))throw Error('The \"host\" parameter is not a valid host name.');this.jc=a;return this};U.prototype.setHost=U.prototype.ad;U.prototype.tm=function(){return this.jc};U.prototype.getHost=U.prototype.tm;U.prototype.Zb=function(a){this.A=a||void 0;return this};U.prototype.setPath=U.prototype.Zb;U.prototype.zm=function(){return this.A};\nU.prototype.getPath=U.prototype.zm;U.prototype.kg=function(a){if(a)if(\"object\"==typeof a)this.D=a;else throw Error('Parameter \"params\" must be an object.');else this.D={};return this};U.prototype.setQuery=U.prototype.kg;U.prototype.tj=function(){return!this.xh()};U.prototype.hasQuery=U.prototype.tj;U.prototype.Bm=function(){return this.D};U.prototype.getQuery=U.prototype.Bm;\nU.prototype.ei=function(a){if(a&&isNaN(parseInt(a,10)))throw Error('Parameter \"port\" must be a number or undefined');this.Wc=+a||void 0;return this};U.prototype.setPort=U.prototype.ei;U.prototype.Am=function(){return this.Wc};U.prototype.getPort=U.prototype.Am;U.prototype.bi=function(a){this.ra=a||void 0;return this};U.prototype.setAnchor=U.prototype.bi;U.prototype.eh=function(){return this.ra};U.prototype.getAnchor=U.prototype.eh;\nU.prototype.t=function(a){if(\"object\"!==typeof a)throw Error('Parameter \"other\" must be an object.');this.nn(this.D,a);return this};U.prototype.mergeQuery=U.prototype.t;U.prototype.V=function(a){if(!a||\"string\"!==typeof a)throw Error('Parameter \"subDomain\" must be a non-empty string');\".\"===a.substr(a.length-1)&&(a=a.substr(0,a.length-1));return this.ad(a+\".\"+this.jc)};U.prototype.addSubDomain=U.prototype.V;\nU.prototype.m=function(a){if(!a||\"string\"!==typeof a)throw Error('Parameter \"subPath\" must be a non-empty string');return this.Zb((this.A?this.A+\"/\":\"\")+a)};U.prototype.addSubPath=U.prototype.m;U.prototype.toString=function(){return[this.Pe+\"://\",this.jc,this.Wc?\":\"+this.Wc:\"\",this.A||!this.xh()||this.ra?\"/\":\"\",this.A?encodeURI(this.A):\"\",this.ho(),this.ra?\"#\"+encodeURIComponent(this.ra):\"\"].join(\"\")};U.prototype.toString=U.prototype.toString;\nU.prototype.Jg=function(){var a={},b;for(b in this.D)a[b]=this.D[b];return a};U.prototype.cloneQuery_=U.prototype.Jg;U.prototype.nn=function(a,b){for(var c in b)b.hasOwnProperty(c)&&\"function\"!==typeof b[c]&&(a[c]=b[c]);return a};U.prototype.ho=function(){var a=[],b,c=this.D,d;for(b in c)c.hasOwnProperty(b)&&\"function\"!==typeof c[b]&&(d=this.D[b],a.push(encodeURIComponent(b)+(void 0===d?\"\":\"=\"+encodeURIComponent(d))));return 0<a.length?\"?\"+a.join(\"&\"):\"\"};\nU.prototype.xh=function(){var a,b=0;for(a in this.D)if(this.D.hasOwnProperty(a)&&\"function\"!==typeof this.D[a]&&(b++,0<b))break;return!b};function mj(a){function b(b){d.removeChild(e);l&&clearTimeout(l);delete mj.no[f];b&&a.pd&&a.pd.call(k,b)}if(!a.url||!a.Bc)throw Error('Parameter \"options\" must specify at least a URL and a callback.');if(\"function\"!==typeof a.Bc)throw Error(\"Parmaters options.callback must be a function\");var c=a.qf||document,d=c.getElementsByTagName(\"head\")[0],e=c.createElement(\"script\"),c=a.url instanceof U?a.url:kj(a.url,a.Qy),f=mj.Yx++,g=a.Qi||\"callback\",h=a.Bc,k={},l=null;k.id=f;k.cancel=function(){b(\"cancelled\")};\n0!==a.timeout&&(l=setTimeout(function(){b(\"timeout\")},a.timeout||3E4));mj.no[f]=function(a){b();h.call(k,a)};e.type=\"text/javascript\";e.src=c.toString()+(c.tj()?\"&\":\"?\")+g+\"=\"+(a.Yn?\"H.service.jsonp.handleResponse(\"+f+\")\":encodeURI(\"H.service.jsonp.handleResponse(\"+f+\")\"));d.appendChild(e);return k}r(\"H.service.jsonp\",mj);mj.iw=function(a){return(a=mj.no[a])?a:function(){}};mj.handleResponse=mj.iw;mj.Yx=0;mj.no={};function nj(a){a=a||{};this.ac=a.subDomain;this.A=a.path;this.mu=a.callbackKey;this.sa=a.baseUrl}r(\"H.service.AbstractRestService\",nj);nj.prototype.$=function(a,b,c,d,e){this.H=(e||this.sa).i();this.ac&&this.H.V(this.ac);this.A&&this.H.Zb(this.A);c&&this.H.Se(\"https\");return this};nj.prototype.configure=nj.prototype.$;nj.prototype.s=function(){return this.H};\nfunction oj(a,b,c,d){if(!ja(c))throw Error(\"onResult callback needed\");if(!ja(d))throw Error(\"onError callback needed\");return mj({url:b,Bc:function(a){c(a)},pd:function(a){d(Error(\"[\"+a+\"] \"+b+\" request failed\"))},Qi:a.mu})};function V(a){a=pj(qj,a);this.Cs(a.baseUrl);this.wo(a.useCIT);this.xo(a.useHTTPS);rj(this,a.app_id,a.app_code);this.dt={}}r(\"H.service.Platform\",V);function rj(a,b,c){a.xp=b;a.wp=c;a.sa.t({app_id:b,app_code:c})}V.prototype.$=function(a){if(a.configure)return a.configure(this.xp,this.wp,this.lt,this.kt,this.sa);throw Error(\"Object is not configurable\");};V.prototype.configure=V.prototype.$;V.prototype.xo=function(a){this.lt=a;this.sa.Se(a?\"https\":\"http\")};V.prototype.setUseHTTPS=V.prototype.xo;\nV.prototype.wo=function(a){this.kt=a;this.sa.ad((a?\"cit.\":\"\")+this.gu)};V.prototype.setUseCIT=V.prototype.wo;V.prototype.Cs=function(a){this.gu=a.jc;this.sa=a=a.i();a.t({xnlp:\"CL_JSMv3.\"+zi().version});this.wo(this.kt);this.xo(this.lt);rj(this,this.xp,this.wp)};V.prototype.setBaseUrl=V.prototype.Cs;V.prototype.hv=function(){return this.sa};V.prototype.getBaseUrl=V.prototype.hv;var qj={app_id:null,app_code:null,useHTTPS:!1,useCIT:!1,baseUrl:new U(\"http\",\"api.here.com\")};\nr(\"H.service.setOptions\",function(a,b){qj[a]=b});r(\"H.service.getOptions\",function(a){return qj[a]});function pj(a,b){var c={},d;for(d in a)!a.hasOwnProperty(d)||d in c||(c[d]=a[d]),b&&b.hasOwnProperty(d)&&(c[d]=b[d]);return c};function sj(a){a=pj(qj.trafficIncidents,a);a.callbackKey=\"jsoncallback\";sj.a.constructor.call(this,a)}u(sj,nj);r(\"H.service.TrafficIncidentsService\",sj);sj.prototype.Wx=function(a,b,c){a=this.s().i().m(\"incidents.json\").t(a);return oj(this,a,b,c)};sj.prototype.requestIncidents=sj.prototype.Wx;sj.prototype.ps=function(a,b,c,d,e,f){a=this.s().i().m([\"incidents/json\",c,a,b].join(\"/\")).t(f||{});return oj(this,a,d,e)};sj.prototype.requestIncidentsByTile=sj.prototype.ps;\nqj.trafficIncidents={subDomain:\"traffic\",path:\"traffic/6.1\"};V.prototype.tq=function(){return this.$(new sj)};V.prototype.getTrafficIncidentsService=V.prototype.tq;function tj(){this.No={}}tj.prototype.pl=function(a,b){var c=this.No[a]||(this.No[a]=[]),d,e=b.length;for(d=0;d<e;d++)c.push(new uj(b[d]))};function uj(a){var b,c=a.boxes,d,e;this.alt=a.alt;this.label=a.label;this.min=a.minLevel;this.max=a.maxLevel;this.vk=[];if(c&&(b=c.length))for(d=c[0],e=new G(d[0],d[1],d[2],d[3]),this.vk.push(e),this.mk=new G(d[0],d[1],d[2],d[3]),a=1;a<b;a++)d=c[a],e=new G(d[0],d[1],d[2],d[3]),this.vk.push(e),this.mk.zd(e,!1,this.mk)}\nuj.prototype.Df=function(a,b){var c;if(a>=this.min&&a<=this.max)if((c=this.vk.length)&&this.mk){if(this.mk.Df(b))for(;c--;)if(this.vk[c].Df(b))return!0}else return!0;return!1};function vj(a){var b=0,c,d,e=a.length;if(0===e)return b;for(c=0;c<e;c++)d=a.charCodeAt(c),b=(b<<5)-b+d,b|=0;return b}var wj=Function(\"return this\")();function xj(a,b){function c(){k=ta();Kc.font=g;h=Math.round(Kc.measureText(\"BESbswyMi\").width);-1===e.indexOf(h)?b():3E5<k-d?b(\"timeout\"):(l=50*++f,wj.setTimeout(c,Math.min(l,d+3E5-k)))}var d=ta(),e=yj(),f=0,g=\"30px \"+a+\",\"+zj.join(\",\"),h,k,l;-1!==zj.indexOf(a)?b():wj.setTimeout(c,50)}\nfunction Aj(a,b){function c(a){a?b(a):0===--d&&b()}var d=a.length;a.forEach(function(a){xj(a,c)})}var zj=La(\"monospace serif\");function yj(){var a=[];zj.forEach(function(b){Kc.font=\"30px \"+b;a.push(Math.round(Kc.measureText(\"BESbswyMi\").width))});return a}function Bj(a,b){var c=b||document,d=c.createElement(\"style\"),e;d.appendChild(c.createTextNode(\"\"));c.head.appendChild(d);e=d.sheet;a.forEach(function(a,b){e.insertRule(a,b)});return d}function Cj(){}\nCj.prototype.pop=function(a){this[a]||(this[a]=[]);return this[a].pop()||wj.document.createElement(\"canvas\")};Cj.prototype.push=function(a,b){this[b]||(this[b]=[]);this[b].push(a)};var Dj=new Cj;function Ej(a,b,c,d,e,f,g){var h=this;g=g||{};f=f?f:{};var k=a.s().i().m(b+\"/\"+a.pa+\"/\"+c).t(f),l=a.Fa;this.service_=a;this.tileBaseUrl_=k;eb.call(this,{tileSize:d,max:512===d?19:20,min:512===d?2:0,getURL:function(a,b,c){var f=h.tileBaseUrl_.i();l&&f.V(l[(c+b+a)%l.length]);f.m(c+\"/\"+a+\"/\"+b+\"/\"+d+\"/\"+e);return f.toString()},crossOrigin:g.crossOrigin,uri:k.toString().replace(/_/g,\"\")+d});this.tileType_=b;this.scheme_=c;this.params_=f;this.copyrightKey_=c.split(\".\")[0];this.updateAndReload_=w(this.updateAndReload_,\nthis);this.getCopyrights=this.ua;this.nu=xb();a.addEventListener(\"versionupdate\",this.updateAndReload_)}u(Ej,eb);Ej.prototype.MAX_STORE_TIME=2592E6;Ej.prototype.c=function(){eb.prototype.c.call(this);this.service_.removeEventListener(\"versionupdate\",this.updateAndReload_)};Ej.prototype.ua=function(a,b){var c=this.service_.ua().No[this.copyrightKey_],d,e=c?c.length:0,f=[];for(d=0;d<e;d++)c[d].Df(b,a)&&f.push(c[d]);return f};\nEj.prototype.updateAndReload_=function(){var a=this.service_;this.tileBaseUrl_=a.s().i().m(this.tileType_+\"/\"+a.pa+\"/\"+this.scheme_).t(this.params_);this.reload(!1)};Ej.prototype.Fg=function(){return this.nu};r(\"H.service.MapTileProvider.prototype.canStore\",Ej.prototype.Fg);Ej.prototype.yf=function(){return this.Fg()?vb():Q.prototype.yf.call(this)};r(\"H.service.MapTileProvider.prototype.getStorage\",Ej.prototype.yf);function Fj(a){a=pj(qj.maptile,a);zb.call(this);this.sa=a.baseUrl;this.A=a.path;this.ac=a.subDomain;this.Fa=a.shards;this.oa=(this.Om=!!a.ignoreTypes)?null:a.type;this.pa=a.version;this.aj=new tj;this.is={};this.$i=0}u(Fj,E);r(\"H.service.MapTileService\",Fj);function Gj(a,b){for(var c={},d=a[b+\"s\"][b],e=d.length;e--;)c[d[e].id]=d[e];a[b+\"s\"]=c}\nFj.prototype.$=function(a,b,c,d,e){this.H=(this.sa||e).i();this.ac&&this.H.V(this.ac);this.oa&&this.H.V(this.oa);this.A&&this.H.Zb(this.A);\"newest\"===this.pa&&this.dm();return this};Fj.prototype.configure=Fj.prototype.$;Fj.prototype.s=function(){return this.H};Fj.prototype.uq=function(){return this.oa};Fj.prototype.getType=Fj.prototype.uq;Fj.prototype.Em=function(){return this.pa};Fj.prototype.getVersion=Fj.prototype.Em;Fj.prototype.yo=function(a){this.pa=a};\nFj.prototype.ua=function(){this.$i||this.vj&&Hj(this);return this.aj};Fj.prototype.getCopyrights=Fj.prototype.ua;Fj.prototype.Po=function(a){a=a.response;var b;Gj(a,\"map\");Gj(a,\"scheme\");Gj(a,\"tiletype\");Gj(a,\"format\");Gj(a,\"resolution\");Gj(a,\"language\");if(\"newest\"===this.pa&&\"traffic\"!==this.oa)for(b in a.maps)a.maps[b].hash&&a.maps[b].newest&&(this.yo(a.maps[b].hash),this.dispatchEvent(\"versionupdate\"));this.vj=a;this.dispatchEvent(\"infoupdate\")};\nFj.prototype.dm=function(){var a=this,b=this.s().i().m(\"info\").t({output:\"json\"});this.Fa&&b.V(this.Fa[0]);mj({url:b,Qi:\"callback_func\",Bc:function(b){a.Po(JSON.parse(b.replace(/,\\s?\\]/g,\"]\")))},pd:function(a){throw Error(\"[\"+a+\"]: Could not fetch meta-info from map tile service @\"+b.toString());},Yn:!0})};\nfunction Hj(a){var b=a.s().i().m(\"copyright\").m(a.pa).t({output:\"json\"});a.Fa&&b.V(a.Fa[0]);a.$i=1;mj({url:b,Qi:\"callback_func\",Bc:function(b){this.$i=2;b=JSON.parse(b);var d=a.aj,e;for(e in b)b.hasOwnProperty(e)&&d.pl(e,b[e]);a.dispatchEvent(\"copyrightupdate\")},pd:function(a){this.$i=-1;throw Error(\"[\"+a+\"]: Could not fetch copyrights from map tile service @\"+b.toString());},Yn:!0})}Fj.prototype.vm=function(){return this.vj};Fj.prototype.getInfo=Fj.prototype.vm;\nFj.prototype.Sg=function(a,b,c,d,e,f){var g;g=vj(this.s().i().m(a+\"/\"+this.pa+\"/\"+b+\"/\"+c+\"/\"+d).t(e?e:{}).toString());var h=this.is[g];h||(h=new Ej(this,a,b,c,d,e,f),this.is[g]=h);return h};Fj.prototype.createTileProvider=Fj.prototype.Sg;Fj.prototype.o=function(a,b,c,d,e,f,g,h){a=this.Sg(a,b,c,d,e,h);return new Yh(a,{opacity:f,dark:!!g})};Fj.prototype.createTileLayer=Fj.prototype.o;qj.maptile={type:\"base\",version:\"newest\",subDomain:\"maps\",path:\"maptile/2.1\",shards:[\"1\",\"2\",\"3\",\"4\"]};\nV.prototype.oh=function(a){var b;b=pj(qj.maptile,a);var c;c=\"\"+(b.ignoreTypes?\"\":b.type);c+=b.path;c+=b.subDomain;c+=b.baseUrl;c+=b.shards?b.shards.join(\"\"):\"\";b=vj(c);c=this.dt[b];c||(c=this.$(new Fj(a)),this.dt[b]=c);return c};V.prototype.getMapTileService=V.prototype.oh;function Ij(a){this.ou=a;this.Mb=this.jh(\"general\",\"default\")||Jj;this.gf=new Eh(200)}Ij.prototype.qe=function(a,b){for(var c,d,e,f,g=1;g<arguments.length;g++)for(c in d=arguments[g],d)if(d.hasOwnProperty(c))for(e in a[c]||(a[c]={}),f=d[c],f)f.hasOwnProperty(e)&&void 0!==f[e]&&(a[c][e]=f[e]);return a};Ij.prototype.Ma=function(a,b){var c=this.jh(\"spaceToGroup\",b);return Kj(this,a,c?c+\"\":void 0)};\nfunction Kj(a,b,c){var d,e,f;f=(b?b+\"_\":\"\")+(c?c:\"default\");d=a.Mb;(e=a.gf.get(f))?d=e:(b&&c?(d=Kj(a,b,void 0),e=Kj(a,void 0,c),b=a.jh(\"venues\",b,\"groups\",c),d=a.qe({},a.Mb,d,e,b)):b&&!c?d=a.qe({},a.Mb,a.jh(\"venues\",b,\"default\")):!b&&c&&(d=a.qe({},a.Mb,a.jh(\"general\",\"groups\",c))),a.gf.add(f,d,1));return d}Ij.prototype.jh=function(a){for(var b=this.ou,c=arguments,d=c.length,e=0;e!==d;)if(b=b[c[e++]],!b)return;return b};\nvar Jj={space:{fillColor:\"rgba(198, 175, 255, .7)\",strokeColor:\"rgb(162, 141, 216)\",lineWidth:0.5},spaceLabel:{fillColor:\"rgb(78,66,111)\"},floor:{fillColor:\"rgba(249, 244, 253, .7)\",strokeColor:\"rgba(255, 255, 255, .7)\",lineWidth:1}};function Lj(a,b,c,d,e,f,g,h){this.xl=[];this.Hj={};P.call(this,a,b,c,d,e,f,g,h)}u(Lj,P);Lj.prototype.mm=function(){return this.xl};function Mj(){}Mj.prototype.Oe=function(){};r(\"H.service.remote.IObject.prototype.retain\",Mj.prototype.Oe);Mj.prototype.He=function(){};r(\"H.service.remote.IObject.prototype.release\",Mj.prototype.He);function Nj(a,b){var c={};this.Wr=a;ya(c,b||c);rh.call(this,c);this.Ie={};Oj(this)}u(Nj,rh);r(\"H.service.remote.ObjectProvider\",Nj);Nj.prototype.e=function(){rh.prototype.e.call(this)};function Oj(a){a=a.Xa(me.SPATIAL);a.update(a.zc+1,je.ADD)}var Pj=[];Nj.prototype.Cb=function(){return Pj};Nj.prototype.requestMarkers=Nj.prototype.Cb;Nj.prototype.Bb=function(){return Pj};Nj.prototype.requestDomMarkers=Nj.prototype.Bb;Nj.prototype.Fe=function(){return!0};Nj.prototype.providesSpatials=Nj.prototype.Fe;\nNj.prototype.Me=function(){return Pj};Nj.prototype.requestSpatials=Nj.prototype.Me;Nj.prototype.tc=function(a){var b=a.Vo,c;!b&&(c=a.Uo)&&(delete a.Uo,c=this.Wr.parse(this,a,c))&&(b=a.Vo=c.spatials);return b||Pj};Nj.prototype.requestSpatialsByTile=Nj.prototype.tc;Nj.prototype.k=function(a){var b=a.X();if(this.Ie[b])throw\"Remote object \"+b+\" allready added\";return this.Ie[b]=a};Nj.prototype.P=function(a){delete this.Ie[a.X()]};function Qj(a,b,c){Nj.call(this,b,c);this.fa=a;this.responseQueue_=[];Rj(this.fa)||(this.dk=w(this.dk,this),this.fa.addEventListener(\"statechange\",this.dk));this.Fa=a.Fa;this.bj=0;this.Un={onSpaceCreated:c&&c.onSpaceCreated,floorLevel:0,styler:null};this.requestSpatialsByTile=w(this.tc,this)}u(Qj,Nj);Qj.prototype.lx=function(a,b,c,d){this.oo?this.Vr.apply(this,arguments):d||this.responseQueue_.push({ry:a,response:c,Vu:b});d&&(a.Hj[b]=!0)};function Sj(a){return a.getVisibility(!0)}\nQj.prototype.tc=function(a,b,c){var d;this.ss||Tj(this);d=a.Ob();b&&(d=d.filter(Sj));if(!c){b=this.bj;var e,f,g,h;if(!a.Hj[b]&&Rj(this.fa)){e=this.fa.s();c=a.x;f=a.y;h=g=a.z;for(var k=1,l;h--;)l=1<<h,k*=4,k+=(c&l&&1)|(f&l&&2);h=k.toString(4).substr(1);e=e.i().m(\"0/tiles-ia\").m(\"L\"+b).m(h+\".json\");this.Fa&&e.V(this.Fa[(c+f+g)%this.Fa.length]);new Tc(\"text/plain\",e.toString(),w(this.lx,this,a,b));a.Hj[b]=!0}a.Hj[this.bj]=!0}a.vg&&(d=d.concat(a.vg),delete a.vg);return d};\nr(\"H.service.venues.ObjectProvider.prototype.requestSpatialsByTile\",Qj.prototype.tc);m=Qj.prototype;m.ig=function(a){var b,c,d;for(b in this.Ie)for(c in d=this.Ie[b].mm(),d)d[c].ig(a);Oj(this);this.Ja();this.bj=a};m.uf=function(){return this.bj};m.Vr=function(a,b,c,d){if(!d&&(this.Un.floorLevel=b,b=(b=this.Wr.parse(this,a,c,this.Un))&&b.spatials))for(a.vg=a.vg?a.vg.concat(b):b,a=b.length;a--;)b[a].ca(je.ADD)};m.dk=function(){Rj(this.fa)&&(Uj(this),this.fa.removeEventListener(\"statechange\",Qj.prototype.dk))};\nfunction Uj(a){Rj(a.fa)&&a.oo&&a.dispatchEvent(\"reload\")}function Tj(a){a.ss=!0;Vj(a,function(b,c){c?a.dispatchEvent(\"error\"):(a.Un.styler=b,Wj(a,w(a.jx,a)))})}m.jx=function(a){a?this.dispatchEvent(\"error\"):(this.responseQueue_.forEach(function(a){this.Vr(a.ry,a.Vu,a.response)},this),this.responseQueue_=null,this.oo=!0,Uj(this))};m.ss=!1;m.oo=!1;function Vj(a,b){new Tc(\"application/json\",a.fa.Rs.i().m(\"styles/styles.json\").toString(),function(a,d){b(d?null:new Ij(a),d)})}var Xj=0;\nfunction Wj(a,b){var c=a.fa.Rs.i().m(\"fonts\"),d=document,e=[],f,g=[];2===Xj?b():(Yj.forEach(function(a){g.push(\"nokiapuretext{name}_rg-webfont\".replace(\"{name}\",a))}),1!==Xj&&(Yj.forEach(function(a,b){f=c.i().m(g[b]);e.push('@font-face {font-family: \"nokiapuretext{name}_rg-webfont\";src: url(\"{url}.woff2\") format(\"woff2\"),url(\"{url}.woff\") format(\"woff\"),url(\"{url}.ttf\") format(\"truetype\");font-weight: normal;font-style: normal;}'.replace(/\\{name\\}/g,a).replace(/\\{url\\}/g,f.toString()))}),a.cq=Bj(e,\nd),Xj=1),Aj(g,function(c){Xj=c?0:2;c&&a.cq&&Jc(a.cq);b(c)}))}var Yj=La(\"inn2 dflt in insl as me\");function Zj(a,b,c,d){M.call(this,ak(a));this.Mi=c;this.Li=d;this.floorsByLevel_={};this.uid=b;this.Xd=0}u(Zj,M);r(\"H.service.venues.Building\",Zj);Zj.prototype.X=function(){return this.uid};Zj.prototype.getId=Zj.prototype.X;Zj.prototype.cw=function(){return this.ka};Zj.prototype.getVenue=Zj.prototype.cw;Zj.prototype.Hv=function(){return this.Mi};Zj.prototype.getMinLevel=Zj.prototype.Hv;Zj.prototype.ym=function(){return this.Li};Zj.prototype.getMaxLevel=Zj.prototype.ym;Zj.prototype.uf=function(){return this.Xd};\nZj.prototype.getCurrentLevel=Zj.prototype.uf;Zj.prototype.ig=function(a){var b,c,d;if(!isNaN(a)&&(b=this.Mi,c=this.Li,a!==this.Xd))for(this.Xd=a;b<=c;b++)(d=this.floorsByLevel_[b])&&d.setVisibility(b===a);return this.Xd};Zj.prototype.lh=function(a){return this.floorsByLevel_[a]};Zj.prototype.getFloor=Zj.prototype.lh;Zj.prototype.cu=function(a,b){this.Mi=Math.min(this.Mi,a);this.Li=Math.max(this.Li,b)};Zj.prototype.adjustMinMaxLevels=Zj.prototype.cu;function bk(a,b){M.call(this,ak(a));this.Ni={};this.Oo=b;a.k(this)}u(bk,M);r(\"H.service.venues.Venue\",bk);bk.prototype.gh=function(a){return this.Ni[a]};bk.prototype.getBuilding=bk.prototype.gh;bk.prototype.mm=function(){return this.Ni};bk.prototype.getBuildings=bk.prototype.mm;bk.prototype.addBuilding=function(a){this.Ni[a.X()]=a;this.k(a)};bk.prototype.X=function(){return this.Oo};bk.prototype.getId=bk.prototype.X;function ck(a,b,c,d){d=d||dk;this.Yc={};d.provider=a;xe.call(this,b,d);c&&(this.Oo=c)}u(ck,xe);r(\"H.service.remote.Spatial\",ck);var dk={};ck.prototype.X=function(){return this.Oo||xe.prototype.X.call(this)};ck.prototype.getId=ck.prototype.X;ck.prototype.Oe=Function();ck.prototype.retain=ck.prototype.Oe;ck.prototype.He=Function();ck.prototype.release=ck.prototype.He;function ek(a,b,c){this.ij=a;c&&(this.labels=c);0<=b&&(this.Eq=b)}ek.prototype.Eq=-1;var fk=new ek([]);\nck.prototype.ee=function(a){return(this.Yc[a.key]||fk).ij};ck.prototype.getGeometry=ck.prototype.ee;ck.prototype.xm=function(a){return(this.Yc[a.key]||fk).labels};ck.prototype.getLabels=ck.prototype.xm;ck.prototype.um=function(a){return(this.Yc[a.key]||fk).Eq};ck.prototype.getHybridIdx=ck.prototype.um;function gk(a,b,c,d){ck.call(this,a,!0,b);d&&(this.isFloorSpace_=d);this.setData(c)}u(gk,ck);r(\"H.service.venues.Space\",gk);gk.prototype.isFloorSpace_=!1;gk.prototype.vw=function(){return this.isFloorSpace_};gk.prototype.isFloorSpace=gk.prototype.vw;gk.prototype.mw=function(a){a&&(this.nw=new qe(a))};gk.prototype.initLabelStyle=gk.prototype.mw;gk.prototype.lh=function(){var a=this.ka;return this.isFloorSpace_?a:a&&a.ka};gk.prototype.getFloor=gk.prototype.lh;gk.prototype.referenceCounter_=0;\ngk.prototype.Oe=function(){++this.referenceCounter_};gk.prototype.retain=gk.prototype.Oe;gk.prototype.He=function(){var a=--this.referenceCounter_,b;a||(b=this.lh(),this.isFloorSpace_?b.floorSpace_&&(b.P(b.floorSpace_),b.floorSpace_=null,b.Ti()):(delete b.Bo[this.X()],b.floorSpaces.P(this),b.Ti()));return 1>a};gk.prototype.release=gk.prototype.He;function hk(){}hk.prototype.parse=function(){};r(\"H.service.remote.IParser.prototype.parse\",hk.prototype.parse);function ik(a,b,c){M.call(this,ak(a));this.Wu=c;this.floorSpace_=new gk(a,b.id,b,!0);this.k(this.floorSpace_);this.floorSpaces=new M(ak(a));this.k(this.floorSpaces);this.Bo={}}u(ik,M);r(\"H.service.venues.Floor\",ik);ik.prototype.nh=function(){return this.Wu};ik.prototype.getLevel=ik.prototype.nh;ik.prototype.sm=function(){return this.floorSpace_};ik.prototype.getFloorSpace=ik.prototype.sm;ik.prototype.Wv=function(){return this.floorSpaces};ik.prototype.getSpaces=ik.prototype.Wv;\nik.prototype.gh=function(){return this.ka};ik.prototype.getBuilding=ik.prototype.gh;ik.prototype.getData=function(){return this.floorSpace_&&this.floorSpace_.getData()};ik.prototype.getData=ik.prototype.getData;ik.prototype.setData=function(a){this.floorSpace_.setData(a);return this};ik.prototype.setData=ik.prototype.setData;ik.prototype.rq=function(a){return this.Bo[a]};ik.prototype.getSpace=ik.prototype.rq;\nik.prototype.Ti=function(){if(!this.floorSpaces.Cc&&!this.floorSpace_){var a=this.gh(),b=this.nh();b===a.Xd&&(a.Xd=0);delete a.floorsByLevel_[b];a.P(this);a.Cc||(b=a.ka,delete b.Ni[a.X()],b.P(a),b.Cc||b.Qa().P(b))}};function jk(){}var kk;jk.prototype.St=Math.PI/180;function lk(a,b){return a&&a.category&&a.category[b||\"id\"]}function mk(a){var b,c;return a.sort(function(a,e){b=a.object.type;c=e.object.type;return b>c?-1:b<c?1:0})}\njk.prototype.parse=function(a,b,c,d){var e=d.floorLevel,f=d.onSpaceCreated;d=d.styler;var g=[],h,k,l,n,p,q,s,t,v,C={};kk=!1;c=c.replace(/''( )?/g,'$1\\\\\"');try{c=wj.JSON.parse(c)}catch(R){kk=!0}if(c.length)for(c=mk(c),h=c.length;h--;){k=c[h];l=k.area;q=l.length;s=p=v=void 0;(p=0<q)||(kk=!0,p=void 0);if(p)for(v=Array(q/2);q;)s=l[--q],p=l[--q],v[q/2]=new F(p,s);l=v?[v]:[];k=k.object;t=null;if(1!==k.type)switch(k.type.replace(\"/polygon\",\"\")){case \"floor\":p=q=k.buildingId;(v=a.Ie[p])||(v=new bk(a,p),v.G(a));\ns=k.buildingMinLevel;t=k.buildingMaxLevel;(p=v.gh(q))?p.adjustMinMaxLevels(s,t):(p=new Zj(a,q,s,t),v.addBuilding(p),p.ig(a.uf()));0>b.xl.indexOf(p)&&b.xl.push(p);(v=p.lh(e))?(q=v.sm(),l=q.ee(b).concat(l)):(v=new ik(a,k,e),q=p,p=v,s=p.nh(),p.setVisibility(s===q.Xd),q.floorsByLevel_[s]=p,q.k(p),q=v.sm(),f&&f(q),p=lk(v.getData(),\"profileKey\"),t=d.Ma(p,void 0),q.Ik(t.floor));C[k.id]=v;0>g.indexOf(q)&&g.push(q);q.Yc[b.key]=new ek(l,-1,void 0);break;case \"space\":if(n=k.id,v=C[/_d$/.test(k.outerAreaId)?\nk.outerAreaId:k.outerAreaId+\"_d\"])q=v.rq(n),p=lk(v.getData(),\"profileKey\"),s=lk(q?q.getData():k),q||(t=q=new gk(a,n,k),v.Bo[t.X()]=t,v.floorSpaces.k(t),t=d.Ma(p,s),q.Ik(t.space),f&&f(q)),q.Oe(),(k=k.label)&&k.firstLinePos?(t=t||d.Ma(p,s),v=q.nw,k=[{lines:La(k.text,\"\\n\"),angle:k.rotation*this.St,font:k.font.face,size:k.font.size,lineHeight:k.font.lineHeight,color:v&&v.fillColor||t.spaceLabel.fillColor,x:k.firstLinePos[0],y:k.firstLinePos[1]}]):k=null,g.push(q),q.Yc[b.key]=new ek(l,-1,k)}}else kk=!0;\nreturn kk?void 0:{spatials:g}};r(\"H.service.venues.Parser.prototype.parse\",jk.prototype.parse);function nk(a,b){var c=b||{};if(!(a&&a instanceof ok))throw Error(\"InvalidArgument: service required\");this.Ho=c.tileCacheSize||256;this.ob=w(this.ob,this);this.objectProvider_=new Qj(a,new jk,{min:this.kp,max:this.ip,onSpaceCreated:c.onSpaceCreated});this.objectProvider_.G(this);this.Vb=w(this.Vb,this);this.objectProvider_.addEventListener(\"update\",this.Vb);this.Jn=w(this.Jn,this);this.objectProvider_.addEventListener(\"reload\",this.Jn);this.In=w(this.In,this);this.objectProvider_.addEventListener(\"error\",\nthis.In);this.Ea=c.pixelRatio||c.pixelratio||1;this.tileSize=256;this.wi=Ch(this.tileSize,this.Ea);this.gf=new Eh(this.Ho,this.ob);this.getCache=this.Nb;Q.call(this,{min:this.kp,max:this.ip})}u(nk,Q);r(\"H.service.venues.TileProvider\",nk);m=nk.prototype;m.kp=16;m.Ea=1;m.ip=20;m.Vb=function(){this.dispatchEvent(\"update\")};m.In=function(){this.dispatchEvent(\"error\")};m.Jn=function(){this.reload(!0)};\nm.ob=function(a,b){var c,d,e;c=b.Ob();for(e=c.length;e--;)d=c[e],delete d.Yc[b.key],d.He();b.data&&Dj.push(b.wk(),this.tileSize);b.xk()};m.ig=function(a){this.objectProvider_.ig(a)};nk.prototype.setCurrentLevel=nk.prototype.ig;nk.prototype.uf=function(){return this.objectProvider_.uf()};nk.prototype.getCurrentLevel=nk.prototype.uf;nk.prototype.Nb=function(){return this.gf};\nnk.prototype.sc=function(a,b,c,d){var e;this.Nb().get(this.getTileKey(a,b,c))?d(null,null):e=wj.setTimeout(function(){d(null,null)},500);return{cancel:function(){wj.clearTimeout(e)}}};nk.prototype.requestInternal=nk.prototype.sc;nk.prototype.mf=function(a,b,c){var d=Dj.pop(this.tileSize),e=this.Nb().get(this.getTileKey(a,b,c));e||(e=new Lj(this.th(a,b,c),a,b,c,this.tileSize,this.Ea,c+this.wi,this.objectProvider_));e.F(d)||Dj.push(d,this.tileSize);return e};nk.prototype.createTileInternal=nk.prototype.mf;function ok(a){var b=qj.venues;a=pj(b,a||{});zb.call(this);this.sa=b.baseUrl;this.A=a.path;this.ac=a.subDomain;this.Fa=b.shards}u(ok,E);r(\"H.service.venues.Service\",ok);var pk={ERROR:-1,INIT:0,READY:1};ok.State=pk;\nok.prototype.$=function(a,b,c,d,e){this.H=(this.sa||e).i();this.Rs=this.H.i().V(\"js\").m(\"statics/venues\").kg();this.ac&&this.H.V(this.ac);this.oa&&this.H.V(this.oa);this.A&&this.H.Zb(this.A);a=qj.venueSignature;b=this.H.i();b.V(a.subDomain);b.m(a.path);b.m(a.version);this.hy=b;this.Cu=this.H.i();this.j===pk.INIT&&this.$p();return this};ok.prototype.configure=ok.prototype.$;function Rj(a){return a.j===pk.READY}ok.prototype.s=function(){return Rj(this)?this.H:void 0};\nok.prototype.$p=function(){var a=this;new Tc(\"application/json\",this.hy.toString(),function(b,c){if(c)a.Kd(pk.ERROR,c);else{var d=b.SignatureTokens,e=new Date(b.Expires),f=e?e.getTime()-ta()-36E5:0;a.H.t(d);e&&4E9>f&&wj.setTimeout(w(a.$p,a),Math.max(f,0));a.Kd(pk.READY)}})};ok.prototype.Bu=function(a,b,c){var d=qj.venuesDiscovery;a=this.Cu.i().V(d.subDomain).m(d.path).m(d.version).t(pj(a,d.params));new Tc(\"application/json\",a.toString(),function(a,d){d?c(d):b(a)})};ok.prototype.discover=ok.prototype.Bu;\nok.prototype.o=function(a){return new Yh(new nk(this,a))};ok.prototype.createTileLayer=ok.prototype.o;ok.prototype.j=pk.INIT;ok.prototype.getState=function(){return this.j};ok.prototype.getState=ok.prototype.getState;ok.prototype.Kd=function(a,b){var c=new fc(\"statechange\",this);b&&(c.errorCode=b);this.j=a;this.dispatchEvent(c)};V.prototype.wq=function(a){return this.$(new ok(a))};V.prototype.getVenueService=V.prototype.wq;\nvar qk={subDomain:\"venue.maps\",path:\"\",shards:La(\"1 2 3 4\").map(function(a){return\"static-\"+a})};qj.venues=qk;qj.venueSignature={version:\"v1\",subDomain:\"signature\",path:\"venues/signature\"};qj.venuesDiscovery={version:\"v1\",subDomain:\"discovery\",path:\"venues/discovery\"};var rk={};function ak(a){rk.provider=a;return rk};function sk(){this.kc={}}sk.prototype.Hc=function(a,b){var c=a+b,d,e,f;if(!(d=this.kc[c])){f={size:{w:26,h:32},anchor:{x:13,y:30}};if(\"CLOSURE\"!==a)switch(d=tk,a){case \"CONGESTION\":d=d.replace(\"{{icon}}\",uk);break;case \"ROADWORKS\":d=d.replace(\"{{icon}}\",vk);break;case \"ACCIDENT\":d=d.replace(\"{{icon}}\",wk);break;default:d=d.replace(\"{{icon}}\",xk)}else d=yk,f.anchor.y=16;e=zk[b]||zk.BLOCKING;d=d.replace(\"{{color}}\",e);this.kc[c]=d=new N(d,f)}return d};\nvar zk={BLOCKING:\"#323232\",VERYHIGH:\"#d5232f\",HIGH:\"#ffa100\"},uk='<path d=\"m 18,15 0,0 c 0,-0.1 0,-0.2 0,-0.4 l 0,-0.2 c 0,-0.1 0,-0.2 0,-0.4 0,0 0,0 0,0 0.6,0 1.1,-0.4 1.1,-1 0,-0.5 -0.5,-1 -1,-1 -0.7,0 -1.1,0.5 -1.1,1 -0.1,0 -0.3,-0.1 -0.4,-0.1 l -0.6,0 -0.3,-0.5 C 15.2,11.6 14.3,11 13.3,11 L 18,11 17.2,9.6 C 17,9.3 16.7,9 16.3,9 L 12.8,9 C 12.4,9 12,9.3 11.8,9.6 L 11.1,11 9.8,11 C 9.7,11 9.6,11 9.5,11 9.2,11 9,10.9 9,10.6 L 9,10.4 C 9,10.2 9.2,9.9 9.5,9.9 l 1.2,0 0.6,-1.04 c 0.3,-0.5 0.9,-0.9 1.5,-0.9 l 3.5,0 c 0.6,0 1.2,0.4 1.5,0.9 l 0.6,1.04 1.2,0 c 0.2,0 0.4,0.3 0.4,0.5 l 0,0.2 c 0,0.3 -0.2,0.5 -0.4,0.5 l -0.1,0 c 0.3,0.3 0.5,0.7 0.5,1.1 l 0,3.4 c 0,0.2 -0.2,0.4 -0.4,0.4 l -1.1,0 C 18.3,16 18,15.8 18,15.6 L 18,15 z M 8,18.1 c 0.6,0 1.1,-0.5 1.1,-1.1 0,-0.5 -0.5,-1 -1.1,-1 -0.6,0 -1.1,0.5 -1.1,1 0,0.6 0.5,1.1 1.1,1.1 m 7,0 c 0.6,0 1.1,-0.5 1.1,-1.1 0,-0.5 -0.5,-1 -1.1,-1 -0.5,0 -1,0.5 -1,1 0,0.6 0.5,1.1 1,1.1 M 14.2,13.6 C 14,13.3 13.7,13 13.3,13 L 9.8,13 C 9.4,13 9,13.3 8.8,13.6 L 8.1,15 15,15 14.2,13.6 z m -8.2,1 0,-0.2 c 0,-0.2 0.2,-0.5 0.5,-0.5 l 1.1,0 0.7,-1 C 8.6,12.4 9.2,12 9.8,12 l 3.5,0 c 0.6,0 1.2,0.4 1.5,0.9 l 0.6,1 1.2,0 c 0.2,0 0.4,0.3 0.4,0.5 l 0,0.2 c 0,0.3 -0.2,0.5 -0.4,0.5 l -0.1,0 c 0.3,0.3 0.5,0.7 0.5,1.1 l 0,3.4 c 0,0.2 -0.2,0.4 -0.4,0.4 l -1.1,0 C 15.3,20 15,19.8 15,19.6 L 15,19 8,19 8,19.6 C 8,19.8 7.8,20 7.5,20 l -1,0 C 6.2,20 6,19.8 6,19.6 l 0,-3.4 c 0,-0.4 0.2,-0.8 0.6,-1.1 l -0.1,0 C 6.2,15.1 6,14.9 6,14.6\" fill=\"#ffffff\" />',\nvk='<path d=\"m 9.24,13.2 -3.7,6.8 1.3,0 2.8,-5.1 1.36,1.5 0,3.6 1.1,0 0,-4 -1.4,-1.6 -1.46,-1.2 z M 14.2,9.5 c 0.7,0 1.3,-0.5 1.3,-1.21 0,-0.7 -0.6,-1.2 -1.3,-1.2 -0.7,0 -1.2,0.5 -1.2,1.2 0,0.71 0.5,1.21 1.2,1.21 m -4.46,0.5 1.06,0 -0.96,2.1 -1,-0.8 0.9,-1.3 z m 2.56,4 -1,-0.7 1,-1.9 0,2.6 z m 6.9,1.7 c -0.4,-0.5 -1.5,-1.1 -2.3,0 -0.2,0.3 -0.6,0.7 -0.9,1.2 l -2.7,-2.1 0,-5 -0.8,-0.7 -3.26,0 -1.5,2.3 7.86,6 C 14.7,18.6 13.8,20 13.8,20 l 6,0 1.5,-1.6 c 0,0 -1.7,-2.2 -2.1,-2.7\" fill=\"#ffffff\" />',wk=\n'<path d=\"m 10.2,15.9 c 0.4,-0.5 1,-0.5 1.4,0 0.5,0.4 0.5,1 0,1.4 -0.4,0.4 -1,0.4 -1.4,0 -0.45,-0.4 -0.45,-1 0,-1.4 m 4.9,-5 c 0.4,-0.4 1.1,-0.4 1.5,0 0.4,0.4 0.4,1.1 0,1.5 -0.4,0.4 -1.1,0.4 -1.5,0 -0.4,-0.4 -0.4,-1.1 0,-1.5 m 2.6,3.8 c 0.1,0.3 0,0.7 -0.3,1 l -1.9,1 c 0,0 0,0.8 0,1.1 0,0.3 0,0.2 -0.1,0.3 -0.1,0.1 -0.3,0.2 -0.5,0.2 l -2.6,-0.3 4.9,-4.9 0.5,1.6 z m -6.5,5 0.1,0.2 c 0.2,0.1 0.5,0.1 0.7,0 l 0.8,-0.9 1.8,0.1 c 1.1,0 1.4,0 1.7,-0.6 l 0.1,-1.3 1.8,-0.8 c 0.4,-0.4 0.6,-1.1 0.4,-1.7 l -0.3,-1.1 0.8,-0.8 c 0.2,-0.2 0.2,-0.5 0,-0.7 L 19,12 c -0.2,-0.2 -0.5,-0.2 -0.7,0 l -0.1,0.1 c 0.1,-0.5 -0.1,-0.9 -0.4,-1.3 L 15.5,8.44 C 15.3,8.26 15,8.26 14.8,8.44 l -0.7,0.74 c -0.2,0.19 -0.2,0.49 0,0.68 l 0.3,0.34 -4.92,5 -0.36,-0.4 C 8.93,14.6 8.63,14.6 8.45,14.8 L 7.7,15.6 c -0.18,0.1 -0.18,0.4 0,0.6 l 2.4,2.4 c 0.3,0.3 0.7,0.4 1.2,0.4 l -0.1,0.1 c -0.2,0.2 -0.2,0.5 0,0.7 m 5.6,-0.8 3.9,0 1.6,-2 -5.5,2 z m -8.08,0 -3.28,-1.8 0.9,1.8 2.38,0 z\" fill=\"#ffffff\" />',\nxk='<path d=\"m 12.9,15.1 c 0.6,0 1.1,-0.5 1.1,-1 l 0.4,-5.9 c 0,-0.6 -0.6,-1.04 -1.5,-1.04 -0.8,0 -1.4,0.44 -1.4,1.04 l 0.3,5.9 c 0,0.5 0.6,1 1.1,1 m 0,1.3 c -0.7,0 -1.3,0.6 -1.3,1.3 0,0.8 0.6,1.4 1.3,1.4 0.8,0 1.4,-0.6 1.4,-1.4 0,-0.7 -0.6,-1.3 -1.4,-1.3\" fill=\"#ffffff\" />',tk='<svg width=\"26\" height=\"32\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"m 16.8,29.4 c 0,-1.1 -1.8,-2 -4,-2 -2.2,0 -4.01,0.9 -4.01,2 0,1.1 1.81,2 4.01,2 2.2,0 4,-0.9 4,-2\" style=\"fill:#878787\"/><path d=\"m 24.1,17.8 c 1.6,-1.6 1.6,-3.8 0,-5.7 L 15.8,1.9 C 15,0.998 14,0.498 12.9,0.498 11.8,0.498 10.7,1.1 10,1.9 L 1.7,12.1 c -1.6,1.9 -1.6,4.1 0,5.7 L 12.9,29 24.1,17.8 z\" stroke=\"#fff\" stroke-width=\"1\" fill=\"{{color}}\" />{{icon}}</svg>',\nyk='<svg width=\"26\" height=\"32\" xmlns=\"http://www.w3.org/2000/svg\"><circle cx=\"13\" cy=\"15\" r=\"11\" fill=\"{{color}}\" stroke=\"#ffffff\" stroke-width=\"1\"/><rect x=\"6\" y=\"13\" width=\"14\" height=\"5\" fill=\"#ffffff\" /></svg>';function Ak(a,b,c){c=c?c:{criticality:\"major,critical\"};if(!(a instanceof sj))throw Error(\"IllegalArgument: service\");ri.call(this,{max:20,min:8,requestData:w(this.Vx,this)});this.kc=new sk;this.fa=a;this.D=c;this.reload=w(this.reload,this);this.Jx=setInterval(this.reload,b||18E4)}u(Ak,ri);r(\"H.service.TrafficIncidentsProvider\",Ak);Ak.prototype.xu={minor:\"HIGH\",\"low impact\":\"HIGH\",major:\"VERYHIGH\",critical:\"BLOCKING\"};\nAk.prototype.Vx=function(a,b,c,d,e){var f=this,g=this.xu,h=this.kc;return this.fa.ps(a,b,c,function(a){var b=[];a=a.TRAFFIC_ITEMS;var c,e,q,s;if(a)for(a=a.TRAFFIC_ITEM,s=a.length;s--;){c=a[s];e=c.TRAFFIC_ITEM_TYPE_DESC;switch(e){case \"ACCIDENT\":case \"CONGESTION\":q=e;break;case \"CONSTRUCTION\":q=\"ROADWORKS\";break;default:q=\"OTHER\"}q=h.Hc(q,g[c.CRITICALITY.DESCRIPTION]);e=c.LOCATION.GEOLOC.ORIGIN;e=new sh({lat:e.LATITUDE,lng:e.LONGITUDE},{provider:f,icon:q});e.setData(c);b.push(e)}d(b)},e,this.D)};\nAk.prototype.e=function(){ri.prototype.e.call(this);clearInterval(this.Jx)};function Bk(a){var b;if(a)for(this.Fo={},b=a.length;b--;)this.Fo[a[b]]=!0;this.Vs={}}var Ck;Bk.prototype.Fo={};Bk.prototype.parse=function(a,b,c){var d,e,f,g,h,k;Ck=!1;try{c=wj.JSON.parse(c)}catch(l){Ck=!0}if(c&&(d=c.metadata))for(e in k={spatials:[]},d){if(c=!this.Fo[e]&&(f=Dk[e]))(g=d[e])||(Ck=!0,g=void 0),c=g;if(c)for(c=g.length;c--;){var n;(n=g[c])||(Ck=!0,n=void 0);(h=n)&&f(b,a,this,e,h,k)}}else Ck=!0;return Ck?void 0:k};r(\"H.service.metaInfo.Parser.prototype.parse\",Bk.prototype.parse);\nvar Dk={\"street labels\":function(a,b,c,d,e,f){var g;(g=e.vertices)||(Ck=!0,g=void 0);if(g){var h=g.length,k,l,n;(l=0<h)||(Ck=!0,l=void 0);if(l)for(k=Array(h/2);h;)n=g[--h],l=g[--h],k[h/2]=new F(l,n);k=k?[k]:[];h=+e[\"font size\"]/a.fe();g=c.Vs[h];g||(Ek.lineWidth=h,g=c.Vs[h]=c.Mb.kq(Ek));Fk(a,b,k,!1,g,e,d,f,-1)}delete e.vertices},\"city center labels\":function(a,b,c,d,e,f){Fk(a,b,Gk(e,[]),!0,c.Mb,e,d,f,-1)},labels:function(a,b,c,d,e,f){var g;(g=e[\"bounding boxes\"])||(Ck=!0,g=void 0);if(g){for(var h=\ng.length,k=[],l;h--;){var n;(n=g[h])||(Ck=!0,n=void 0);(l=n)&&Gk(l,k)}Fk(a,b,k,!0,c.Mb,e,d,f,-1)}delete e[\"bounding boxes\"]},buildings:function(a,b,c,d,e,f){var g=e.id,h=b.Ie[g],k,l,n,p=[],q=[];(k=e)||(Ck=!0,k=void 0);if(k&&((l=k.vertices)||(Ck=!0,l=void 0),l)){var s;(s=k.polygons)||(Ck=!0,s=void 0);(n=s)&&p.push.apply(p,Hk(l,n));(k=k.outlines)||(Ck=!0,k=void 0);(n=k)&&q.push.apply(q,Hk(l,n))}n=p.length;p.push.apply(p,q);(q=p.length)||(Ck=!0,q=void 0);q&&(h?(h.Yc[a.key]=new ek(p,n,void 0),f.spatials.push(h)):\n(h=Fk(a,b,p,!0,c.Mb,e,d,f,n,g),b.k(h)))}};Dk[\"transit stops\"]=Dk.POIs=Dk.labels;var Ik=[\"box 2\",\"box 1\",\"annotation box\",\"icon box\"];function Gk(a,b){for(var c=Ik.length,d,e;c--;)if(d=Ik[c],e=a[d]){var f=e[0],g=e[1],h=e[2];e=e[3];b.push([new F(f,g),new F(f+h,g),new F(f+h,g+e),new F(f,g+e)]);delete a[d]}return b}\nfunction Hk(a,b){var c=b.length,d,e,f,g,h;if(0<c)for(e=Array(c);c--;)if((d=b[c])||(Ck=!0,d=void 0),d&&(g=d.length,0<g))for(e[c]=f=Array(g);g--;)h=2*d[g],f[g]=new F(a[h],a[h+1]);return e||[]}var Jk={};function Fk(a,b,c,d,e,f,g,h,k,l){Jk.style=e;d=new ck(b,d,l,Jk);d.Yc[a.key]=new ek(c,k,void 0);Kk(f);f.category=g;d.setData(f);h.spatials.push(d);d.G(b);return d}Bk.prototype.Mb=new qe({strokeColor:\"transparent\",fillColor:\"transparent\",lineWidth:0});var Ek={};\nfunction Kk(a){var b,c=!1;switch(typeof a){case \"object\":if(a instanceof Array)for(b=a.length;b--;)Kk(a[b])?c=!0:delete a[b];else if(a)for(b in a)Kk(a[b])?c=!0:delete a[b];break;case \"number\":c=!0;break;default:c=!!a}return c};function Lk(a,b,c){c=c||{};this.D=b=b||{};if(!(a&&a instanceof Mk))throw Error(\"InvalidArgument: service required\");this.fa=a;this.Zk=w(this.Zk,this);this.fa.addEventListener(\"versionupdate\",this.Zk);this.sa=a.s().i().m(\"maptile/\"+a.pa+\"/normal.day\").t(this.sp).t(b);this.Fa=a.Fa||null;this.Ea=c.pixelRatio||c.pixelratio||1;this.tileSize=c.tileSize||256;this.wi=0;this.Ho=c.tileCacheSize||256;this.objectProvider_=new Nj(new Bk(c.categoryFilter));this.objectProvider_.G(this);this.Vb=w(this.Vb,this);this.objectProvider_.addEventListener(\"update\",\nthis.Vb);this.ob=w(this.ob,this);this.gf=new Eh(this.Ho,this.ob);this.getCache=this.Nb;Q.call(this,{min:0,max:20})}u(Lk,Q);r(\"H.service.metaInfo.TileProvider\",Lk);Lk.prototype.Nb=function(){return this.gf};Lk.prototype.ob=function(a,b){var c,d,e;c=b.Ob();for(d=c.length;d--;)e=c[d],delete e.Yc[b.key],e.He();b.data&&(Dj.push(b.wk(),this.tileSize),b.xk())};Lk.prototype.Vb=function(){this.dispatchEvent(\"update\")};\nLk.prototype.sc=function(a,b,c,d,e){var f=this.sa.i(),g=this.Fa,h=this.tileSize,k=this.getTileKey(a,b,c),k=this.Nb().get(k),l,n;if(k&&!k.wj())d(Dj.pop(this.tileSize),null),l={cancel:function(){}};else{g&&f.V(g[(c+b+a)%g.length]);f.m(c+\"/\"+a+\"/\"+b+\"/\"+h+\"/png8\");var p=wj.setTimeout(function(){n=new ua(f.toString(),function(a,b){b?e():d(null,a)})},500)}return l||{cancel:function(){n||wj.clearTimeout(p)}}};Lk.prototype.requestInternal=Lk.prototype.sc;\nLk.prototype.mf=function(a,b,c,d,e){var f=this.objectProvider_,g;g=d||Dj.pop(this.tileSize);if(d)a=this.Nb().get(this.getTileKey(a,b,c)),a.F(d);else if(d=a=new P(this.th(a,b,c),a,b,c,this.tileSize,this.Ea,c+this.wi,f),delete d.Vo,d.Uo=e,a.F(g))for(e=a.Ob(),g=e.length;g--;)e[g].Oe();else Dj.push(g,this.tileSize);return a};Lk.prototype.createTileInternal=Lk.prototype.mf;Lk.prototype.e=function(){this.objectProvider_.e();this.fa.removeEventListener(\"versionupdate\",this.Zk);Q.prototype.e.call(this)};\nLk.prototype.Zk=function(){var a=this.fa;this.sa=a.s().i().m(\"maptile/\"+a.pa+\"/normal.day\").t(this.sp).t(this.D);this.reload(!1)};Lk.prototype.sp={metadata:\"metaonly\",mgen:\"2\"};function Mk(a){a=pj(qj.maptile,a||{});zb.call(this);this.sa=a.baseUrl;this.A=a.path;this.ac=a.subDomain;this.Fa=a.shards;this.oa=(this.Om=!!a.ignoreTypes)?null:a.type;this.pa=a.version;this.aj=new tj}u(Mk,E);r(\"H.service.metaInfo.Service\",Mk);function Nk(a,b){for(var c={},d=a[b+\"s\"][b],e=d.length;e--;)c[d[e].id]=d[e];a[b+\"s\"]=c}\nMk.prototype.$=function(a,b,c,d,e){this.H=(this.sa||e).i();this.ac&&this.H.V(this.ac);this.oa&&this.H.V(this.oa);this.A&&this.H.Zb(this.A);\"newest\"===this.pa&&this.dm();return this};Mk.prototype.configure=Mk.prototype.$;Mk.prototype.s=function(){return this.H};Mk.prototype.uq=function(){return this.oa};Mk.prototype.Em=function(){return this.pa};Mk.prototype.getVersion=Mk.prototype.Em;Mk.prototype.yo=function(a){this.pa=a};Mk.prototype.ua=function(){return this.aj};Mk.prototype.getCopyrights=Mk.prototype.ua;\nMk.prototype.Po=function(a){a=a.response;var b;Nk(a,\"map\");Nk(a,\"scheme\");Nk(a,\"tiletype\");Nk(a,\"format\");Nk(a,\"resolution\");Nk(a,\"language\");if(\"newest\"===this.pa&&\"traffic\"!==this.oa)for(b in a.maps)a.maps[b].hash&&a.maps[b].newest&&(this.yo(a.maps[b].hash),this.dispatchEvent(\"versionupdate\"));this.vj=a;this.dispatchEvent(\"infoupdate\")};\nMk.prototype.dm=function(){var a=this,b=this.s().i().m(\"info\").t({output:\"json\"});this.Fa&&b.V(this.Fa[0]);mj({url:b,Qi:\"callback_func\",Bc:function(b){a.Po(JSON.parse(b.replace(/,\\s?\\]/g,\"]\")))},pd:function(a){throw Error(\"[\"+a+\"]: Could not fetch meta-info from map tile service @\"+b.toString());},Yn:!0})};Mk.prototype.vm=function(){return this.vj};Mk.prototype.getInfo=Mk.prototype.vm;Mk.prototype.Sg=function(a,b,c,d){return new Lk(this,d,{tileSize:a,pixelRatio:b,categoryFilter:c})};\nMk.prototype.createTileProvider=Mk.prototype.Sg;Mk.prototype.o=function(a,b,c,d){a=this.Sg(a,b,c,d);return new Yh(a)};Mk.prototype.createTileLayer=Mk.prototype.o;V.prototype.mq=function(a){return this.$(new Mk(a))};V.prototype.getMetaInfoService=V.prototype.mq;qj.metainfotile={type:\"base\",version:\"newest\",subDomain:\"maps\",path:\"maptile/2.1\",shards:[\"1\",\"2\",\"3\",\"4\"]};V.prototype.wu=function(a,b,c,d,e,f){var g=this.oh(),h=this.oh({type:\"aerial\"}),k=this.oh({type:\"traffic\"}),l=this.oh({type:\"pano\"}),n=this.mq(),p=this.tq(),q=this.wq(),s={},t={crossOrigin:\"anonymous\"},v;\"object\"===typeof a&&(f=a,t.crossOrigin=\"crossOrigin\"in f?f.crossOrigin:\"anonymous\",a=f.tileSize,b=f.ppi,c=f.lg,d=f.lg2,e=f.style,f=f.pois);a=a||256;v=320===b?2:1;320===b&&(s.ppi=b);c&&(s.lg=c);d&&(s.lg2=d);e&&(s.style=e);f&&(s.pois=f);b=new Ak(p,void 0,c?s:null);this.lw=new si(b);return{normal:{xbase:g.o(\"xbasetile\",\n\"normal.day\",a,\"png8\",s,1,!1,t),xbasenight:g.o(\"xbasetile\",\"normal.night\",a,\"png8\",s,1,!1,t),base:g.o(\"basetile\",\"normal.day\",a,\"png8\",s,1,!1,t),basenight:g.o(\"basetile\",\"normal.night\",a,\"png8\",s,1,!1,t),map:g.o(\"maptile\",\"normal.day\",a,\"png8\",s,1,!1,t),mapnight:g.o(\"maptile\",\"normal.night\",a,\"png8\",s,1,!1,t),traffic:k.o(\"traffictile\",\"normal.day\",a,\"png8\",s,1,!1,t),trafficnight:k.o(\"traffictile\",\"normal.night\",a,\"png8\",s,1,!1,t),transit:g.o(\"maptile\",\"normal.day.transit\",a,\"png8\",s,1,!1,t),panorama:l.o(\"rctile\",\n\"normal.day\",a,\"png8\",s,1,!1,t),panoramanight:l.o(\"rctile\",\"normal.night\",a,\"png8\",s,1,!1,t),labels:g.o(\"labeltile\",\"normal.day\",a,\"png\",s,1,!1,t),metaInfo:n.o(a,v,[\"buildings\"],s)},satellite:{xbase:h.o(\"xbasetile\",\"hybrid.day\",a,\"jpg\",s,1,!0,t),base:h.o(\"basetile\",\"hybrid.day\",a,\"jpg\",s,1,!0,t),map:h.o(\"maptile\",\"hybrid.day\",a,\"jpg\",s,1,!0,t),traffic:k.o(\"traffictile\",\"hybrid.day\",a,\"jpg\",s,1,!0,t),panorama:l.o(\"rctile\",\"hybrid.day\",a,\"jpg\",s,1,!0,t),labels:h.o(\"labeltile\",\"hybrid.day\",a,\"png\",s,\n1,!0,t)},terrain:{xbase:h.o(\"xbasetile\",\"terrain.day\",a,\"jpg\",s,1,!1,t),base:h.o(\"basetile\",\"terrain.day\",a,\"jpg\",s,1,!1,t),map:h.o(\"maptile\",\"terrain.day\",a,\"jpg\",s,1,!1,t),traffic:k.o(\"traffictile\",\"terrain.day\",a,\"jpg\",s,1,!1,t),panorama:l.o(\"rctile\",\"terrain.day\",a,\"jpg\",s,1,!1,t),labels:h.o(\"labeltile\",\"terrain.day\",a,\"png\",s,1,!1,t)},incidents:this.lw,venues:q.o({tileSize:a,pixelRatio:v})}};V.prototype.createDefaultLayers=V.prototype.wu;function Ok(a){a=pj(qj.routing,a);a.callbackKey=\"jsoncallback\";Ok.a.constructor.call(this,a)}u(Ok,nj);r(\"H.service.RoutingService\",Ok);Ok.prototype.yl=function(a,b,c){a=this.s().i().m(\"calculateroute.json\").t(a);oj(this,a,b,c)};Ok.prototype.calculateRoute=Ok.prototype.yl;qj.routing={subDomain:\"route\",path:\"routing/7.2\"};V.prototype.Vv=function(a){return this.$(new Ok(a))};V.prototype.getRoutingService=V.prototype.Vv;function Pk(a){a=pj(qj.geocoding,a);a.callbackKey=\"jsoncallback\";Pk.a.constructor.call(this,a);this.vs=a.reverseSubDomain}u(Pk,nj);r(\"H.service.GeocodingService\",Pk);Pk.prototype.av=function(a,b,c){a=this.s().i().m(\"geocode.json\").t(a);return oj(this,a,b,c)};Pk.prototype.geocode=Pk.prototype.av;Pk.prototype.Zx=function(a,b,c){a=this.s().i().m(\"reversegeocode.json\").t(a);this.vs&&a.V(this.vs);return oj(this,a,b,c)};Pk.prototype.reverseGeocode=Pk.prototype.Zx;\nPk.prototype.search=function(a,b,c){a=this.s().i().m(\"search.json\").t(a);return oj(this,a,b,c)};Pk.prototype.search=Pk.prototype.search;qj.geocoding={subDomain:\"geocoder\",path:\"6.2\",reverseSubDomain:\"reverse\"};V.prototype.sv=function(a){return this.$(new Pk(a))};V.prototype.getGeocodingService=V.prototype.sv;function Qk(a){a=pj(qj.places,a);a.callbackKey=\"callback\";Qk.a.constructor.call(this,a)}u(Qk,nj);r(\"H.service.PlacesService\",Qk);Qk.EntryPoint={SEARCH:\"discover/search\",SUGGEST:\"suggest\",EXPLORE:\"discover/explore\",AROUND:\"discover/around\",HERE:\"discover/here\",CATEGORIES:\"categories/places\"};Qk.prototype.Yb=function(a,b,c,d){b=b||{};a=this.s().i().m(a).t(b);return oj(this,a,c,d)};Qk.prototype.request=Qk.prototype.Yb;Qk.prototype.search=function(a,b,c){return this.Yb(\"discover/search\",a,b,c)};\nQk.prototype.search=Qk.prototype.search;Qk.prototype.oy=function(a,b,c){return this.Yb(\"suggest\",a,b,c)};Qk.prototype.suggest=Qk.prototype.oy;Qk.prototype.Qu=function(a,b,c){return this.Yb(\"discover/explore\",a,b,c)};Qk.prototype.explore=Qk.prototype.Qu;Qk.prototype.eu=function(a,b,c){return this.Yb(\"discover/around\",a,b,c)};Qk.prototype.around=Qk.prototype.eu;Qk.prototype.kw=function(a,b,c){return this.Yb(\"discover/here\",a,b,c)};Qk.prototype.here=Qk.prototype.kw;\nQk.prototype.pu=function(a,b,c){return this.Yb(\"categories/places\",a,b,c)};Qk.prototype.categories=Qk.prototype.pu;Qk.prototype.fm=function(a,b,c,d){a=kj(a);d&&a.t(d);return oj(this,a,b,c)};Qk.prototype.follow=Qk.prototype.fm;qj.places={subDomain:\"places\",path:\"places/v1\"};V.prototype.Nv=function(){return this.$(new Qk)};V.prototype.getPlacesService=V.prototype.Nv;function Rk(a){a=pj(qj.enterpriseRouting,a);a.callbackKey=\"jsoncallback\";if(!A(a.baseUrl,U))throw new x(Rk,0,\"Invalid base url\");this.Sa=a;Rk.a.constructor.call(this,a)}u(Rk,nj);r(\"H.service.EnterpriseRoutingService\",Rk);Rk.prototype.yl=function(a,b,c){a=this.s().i().m(\"calculateroute.json\").t(a);oj(this,a,b,c)};Rk.prototype.calculateRoute=Rk.prototype.yl;Rk.prototype.Uv=function(a,b,c){a=this.s().i().m(\"getroute.json\").t(a);oj(this,a,b,c)};Rk.prototype.getRoute=Rk.prototype.Uv;\nRk.prototype.Bv=function(a,b,c){a=this.s().i().m(\"getlinkinfo.json\").t(a);oj(this,a,b,c)};Rk.prototype.getLinkInfo=Rk.prototype.Bv;Rk.prototype.lu=function(a,b,c){a=this.s().i().m(\"calculateisoline.json\").t(a);oj(this,a,b,c)};Rk.prototype.calculateIsoline=Rk.prototype.lu;Rk.prototype.$=function(a,b,c,d,e){var f,g=qj.enterpriseRouting;this.Sa.baseUrl===g.baseUrl&&e&&(f=e.i(),f.ad(g.host),d&&f.V(g.citSubDomain));return nj.prototype.$.apply(this,[a,b,c,d,f])};Rk.prototype.configure=Rk.prototype.$;\nvar Sk={subDomain:\"route\",path:\"routing/6.2\",baseUrl:new U(\"http\",\"nlp.nokia.com\"),host:\"nlp.nokia.com\",citSubDomain:\"st\"};qj.enterpriseRouting=Sk;V.prototype.pv=function(a){return this.$(new Rk(a))};V.prototype.getEnterpriseRoutingService=V.prototype.pv;r(\"H.service.buildInfo\",function(){return xi(\"mapsjs-service\",\"0.12.2\",\"d254993\")});\n");